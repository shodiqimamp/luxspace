{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useReducer, useRef } from \"react\";\nimport useSafeDispatch from \"./useSafeDispatch\";\nconst defaultState = {\n  data: null,\n  status: \"idle\",\n  error: null\n};\nexport default function useAsync(initialState) {\n  _s();\n\n  const initialStateRef = useRef({ ...defaultState,\n    ...initialState\n  });\n  const [{\n    data,\n    status,\n    error\n  }, setState] = useReducer((state, action) => {\n    return { ...state,\n      ...action\n    };\n  }, initialStateRef.current);\n  const safeSetState = useSafeDispatch(setState);\n  const run = useCallback(promise => {\n    if (!promise || !promise.then) throw new Error(`The argument passed to useAsync().run must be a promise`);\n    safeSetState({\n      status: \"pending\"\n    });\n    return promise.then(data => {\n      safeSetState({\n        data,\n        status: \"resolved\"\n      });\n      return data;\n    }, error => {\n      safeSetState({\n        status: \"rejected\",\n        error: JSON.parse(error.message)\n      });\n    });\n  }, [safeSetState]);\n  const setData = useCallback(data => {\n    safeSetState({\n      data\n    });\n  }, [safeSetState]);\n  const setError = useCallback(error => {\n    safeSetState({\n      error\n    });\n  }, [safeSetState]);\n  const reset = useCallback(() => {\n    safeSetState(initialStateRef.current);\n  }, [safeSetState]);\n  return {\n    data,\n    status,\n    error,\n    run,\n    setData,\n    setError,\n    reset,\n    isIdle: status === \"idle\",\n    isLoading: status === \"idle\" || status === \"pending\",\n    isError: status === \"rejected\",\n    isSuccess: status === \"resolved\"\n  };\n}\n\n_s(useAsync, \"Mm0HVPYrz5CSrEAO07wj0dQkjh4=\", false, function () {\n  return [useSafeDispatch];\n});","map":{"version":3,"names":["useCallback","useReducer","useRef","useSafeDispatch","defaultState","data","status","error","useAsync","initialState","initialStateRef","setState","state","action","current","safeSetState","run","promise","then","Error","JSON","parse","message","setData","setError","reset","isIdle","isLoading","isError","isSuccess"],"sources":["C:/Project/BWA/ReactNew/luxspace/src/helpers/hooks/useAsync.js"],"sourcesContent":["import { useCallback, useReducer, useRef } from \"react\";\r\n\r\nimport useSafeDispatch from \"./useSafeDispatch\";\r\n\r\nconst defaultState = {\r\n  data: null,\r\n  status: \"idle\",\r\n  error: null,\r\n};\r\n\r\nexport default function useAsync(initialState) {\r\n  const initialStateRef = useRef({\r\n    ...defaultState,\r\n    ...initialState,\r\n  });\r\n\r\n  const [{ data, status, error }, setState] = useReducer((state, action) => {\r\n    return { ...state, ...action };\r\n  }, initialStateRef.current);\r\n\r\n  const safeSetState = useSafeDispatch(setState);\r\n\r\n  const run = useCallback(\r\n    (promise) => {\r\n      if (!promise || !promise.then)\r\n        throw new Error(\r\n          `The argument passed to useAsync().run must be a promise`\r\n        );\r\n      safeSetState({ status: \"pending\" });\r\n      return promise.then(\r\n        (data) => {\r\n          safeSetState({ data, status: \"resolved\" });\r\n\r\n          return data;\r\n        },\r\n        (error) => {\r\n          safeSetState({\r\n            status: \"rejected\",\r\n            error: JSON.parse(error.message),\r\n          });\r\n        }\r\n      );\r\n    },\r\n    [safeSetState]\r\n  );\r\n\r\n  const setData = useCallback(\r\n    (data) => {\r\n      safeSetState({ data });\r\n    },\r\n    [safeSetState]\r\n  );\r\n\r\n  const setError = useCallback(\r\n    (error) => {\r\n      safeSetState({ error });\r\n    },\r\n    [safeSetState]\r\n  );\r\n\r\n  const reset = useCallback(() => {\r\n    safeSetState(initialStateRef.current);\r\n  }, [safeSetState]);\r\n\r\n  return {\r\n    data,\r\n    status,\r\n    error,\r\n    run,\r\n    setData,\r\n    setError,\r\n    reset,\r\n    isIdle: status === \"idle\",\r\n    isLoading: status === \"idle\" || status === \"pending\",\r\n    isError: status === \"rejected\",\r\n    isSuccess: status === \"resolved\",\r\n  };\r\n}\r\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,UAAtB,EAAkCC,MAAlC,QAAgD,OAAhD;AAEA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,IADa;EAEnBC,MAAM,EAAE,MAFW;EAGnBC,KAAK,EAAE;AAHY,CAArB;AAMA,eAAe,SAASC,QAAT,CAAkBC,YAAlB,EAAgC;EAAA;;EAC7C,MAAMC,eAAe,GAAGR,MAAM,CAAC,EAC7B,GAAGE,YAD0B;IAE7B,GAAGK;EAF0B,CAAD,CAA9B;EAKA,MAAM,CAAC;IAAEJ,IAAF;IAAQC,MAAR;IAAgBC;EAAhB,CAAD,EAA0BI,QAA1B,IAAsCV,UAAU,CAAC,CAACW,KAAD,EAAQC,MAAR,KAAmB;IACxE,OAAO,EAAE,GAAGD,KAAL;MAAY,GAAGC;IAAf,CAAP;EACD,CAFqD,EAEnDH,eAAe,CAACI,OAFmC,CAAtD;EAIA,MAAMC,YAAY,GAAGZ,eAAe,CAACQ,QAAD,CAApC;EAEA,MAAMK,GAAG,GAAGhB,WAAW,CACpBiB,OAAD,IAAa;IACX,IAAI,CAACA,OAAD,IAAY,CAACA,OAAO,CAACC,IAAzB,EACE,MAAM,IAAIC,KAAJ,CACH,yDADG,CAAN;IAGFJ,YAAY,CAAC;MAAET,MAAM,EAAE;IAAV,CAAD,CAAZ;IACA,OAAOW,OAAO,CAACC,IAAR,CACJb,IAAD,IAAU;MACRU,YAAY,CAAC;QAAEV,IAAF;QAAQC,MAAM,EAAE;MAAhB,CAAD,CAAZ;MAEA,OAAOD,IAAP;IACD,CALI,EAMJE,KAAD,IAAW;MACTQ,YAAY,CAAC;QACXT,MAAM,EAAE,UADG;QAEXC,KAAK,EAAEa,IAAI,CAACC,KAAL,CAAWd,KAAK,CAACe,OAAjB;MAFI,CAAD,CAAZ;IAID,CAXI,CAAP;EAaD,CApBoB,EAqBrB,CAACP,YAAD,CArBqB,CAAvB;EAwBA,MAAMQ,OAAO,GAAGvB,WAAW,CACxBK,IAAD,IAAU;IACRU,YAAY,CAAC;MAAEV;IAAF,CAAD,CAAZ;EACD,CAHwB,EAIzB,CAACU,YAAD,CAJyB,CAA3B;EAOA,MAAMS,QAAQ,GAAGxB,WAAW,CACzBO,KAAD,IAAW;IACTQ,YAAY,CAAC;MAAER;IAAF,CAAD,CAAZ;EACD,CAHyB,EAI1B,CAACQ,YAAD,CAJ0B,CAA5B;EAOA,MAAMU,KAAK,GAAGzB,WAAW,CAAC,MAAM;IAC9Be,YAAY,CAACL,eAAe,CAACI,OAAjB,CAAZ;EACD,CAFwB,EAEtB,CAACC,YAAD,CAFsB,CAAzB;EAIA,OAAO;IACLV,IADK;IAELC,MAFK;IAGLC,KAHK;IAILS,GAJK;IAKLO,OALK;IAMLC,QANK;IAOLC,KAPK;IAQLC,MAAM,EAAEpB,MAAM,KAAK,MARd;IASLqB,SAAS,EAAErB,MAAM,KAAK,MAAX,IAAqBA,MAAM,KAAK,SATtC;IAULsB,OAAO,EAAEtB,MAAM,KAAK,UAVf;IAWLuB,SAAS,EAAEvB,MAAM,KAAK;EAXjB,CAAP;AAaD;;GAnEuBE,Q;UAUDL,e"},"metadata":{},"sourceType":"module"}